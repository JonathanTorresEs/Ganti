<?phpif (isset($actualizarControles)) {    $ID = '<p><input type="hidden" name="ID" value="' . $this->uri->segment(3) . '"></p>';    $shift = $actualizarControles->shift;;    $machine_id = $actualizarControles->machine_id;    $diesel_loaded = $actualizarControles->gas_loaded;    $operator = $actualizarControles->operator;    $uploated_user = $actualizarControles->uploated_user;;    $hour_meter_initial = $actualizarControles->hour_meter_initial;    $hour_meter_final = $actualizarControles->hour_meter_final;    $material_weight = $actualizarControles->mineral_weight;    $scoops = $actualizarControles->scoops;    $oil_m = $actualizarControles->oil_m;    $oil_n = $actualizarControles->oil_n;    $oil_d = $actualizarControles->oil_d;    $oil_t = $actualizarControles->oil_t;    $oil_h = $actualizarControles->oil_h;    $date = $actualizarControles->date;    $comments = $actualizarControles->comments;    $action = 'actualizar';    $button = 'Actualizar';} else {    $ID = '';    $shift = '';    $diesel_loaded = "";    $operator = "";    $uploated_user = "";    $machine_id = '';    $diesel_loaded = '0';    $oil_m = '0';    $oil_n = '0';    $oil_d = '0';    $oil_t = '0';    $oil_h = '0';    $hour_meter_initial = '';    $hour_meter_final = '';    $scoops = '';    $material_weight = '';    $date = '';    $comments = '';    $action = 'insertar';    $button = 'Guardar';} ?><div id="wrapper">    <?php include('partials/admin_menu_view.php'); ?>    <div id="page-wrapper">        <div class="row">            <div class="col-lg-12">                <h1 class="page-header">Controles de Máquinas</h1>                <div>                    <div class="alert alert-success alert-dismissable" id="alert-form" style="display: none">                        <a href="#" class="close" data-dismiss="alert" aria-label="close">×</a>                        <span id="span-alert-form"></span>                    </div>                    <div class="tab-content">                        <div class="divider"></div>                        <?php echo form_open("controles/$action", 'method="post" class="margin-bottom"'); ?>                        <?php echo $ID; ?>                        <div class="form-group">                            <div class="row">                                <div class="col-sm-12">                                    <div class="col-sm-6">                                        <label for="IDMaquina">Seleccione Máquina</label>                                        <select id="IDMaquina" required name="IDMachine"                                                class="form-control js-data-example-ajax"                                                onchange="onchange_function()">                                            <?php if (isset($actualizarControles)) { ?>                                                <option value="<?php echo $machine_id ?>"><?php                                                foreach ($maquinasGuardadas as $maquina) {                                                    if ($machine_id == $maquina->machine_id) {                                                        echo $maquina->description ?> </option>                                                    <?php }                                                }                                            } ?>                                        </select>                                    </div>                                    <input type="hidden" name="IDUser"                                           value="<?= $this->session->userdata('user_id') ?>">                                    <div class="col-sm-6">                                        <div class="col-sm-6">                                            <label for="scoops">Usuario</label>                                            <input disabled type="text" class="form-control"                                                   value="<?php                                                   foreach ($usuariosGuardados as $user) :                                                       if ($user->user_id == $this->session->userdata('user_id')) {                                                           echo $user->username;                                                       }                                                   endforeach;                                                   ?>">                                        </div>                                        <?php print_r($operator);  ?>                                        <div class="col-sm-6">                                            <label for="IDOperador">Seleccione Operador</label>                                            <select id="IDOperador" required name="IDOperador"                                                    class="form-control js-data-example-ajax">                                                <?php if (isset($actualizarControles)) { ?>                                                <option value="<?php echo $operator ?>">                                                    <?php                                                    foreach ($operadoresGuardados as $operadors) :                                                        if ($operadors->operator_id == $operator) { ?>                                                            <?php echo $operadors->name ?></option>                                                        <?php } endforeach;                                                } ?>                                            </select>                                        </div>                                    </div>                                </div>                            </div>                        </div>                        <div class="row">                            <div class="col-sm-12">                                <div class="col-sm-2">                                    <label for="fecha">Fecha</label>                                    <input required type="date" class="form-control" name="date" id="datepick"                                           value="<?php echo $date ?>">                                </div>                                <div class="col-sm-2"><label for="Turno">Turno</label> <select required                                              class="form-control"                                             id="Turno"                                            name="Turno"> <?php if (isset($actualizarControles)) { ?>                                            <option value="<?php echo $shift ?>"><?php echo $shift ?></option> <?php } ?>                                        <option value="1">1</option>                                        <option value="2">2</option>                                    </select></div>                            </div>                        </div>                        <div class="row">                            <div class="col-sm-6">                                <div class="col-sm-12">                                    <label for="scoops">Combustible Cargado</label>                                    <input type="text" required id="diesel" name="gas_loaded" class="form-control"                                           value="<?php echo $diesel_loaded ?>">                                </div>                            </div>                            <div class="col-sm-6">                                <div class="col-sm-6">                                    <label id="label-hourIn" for="hourIn">Horómetro Inicial</label>                                    <input type="text" id="hourIn" name="hourIn" class="form-control"                                           value="<?php echo $hour_meter_initial ?>">                                </div>                                <div class="col-sm-6">                                    <label for="hourOut" id="label-hourOut">Horómetro Final</label>                                    <input type="text" id="hourOut" name="hourOut" class="form-control"                                           value="<?php echo $hour_meter_final ?>">                                </div>                            </div>                        </div>                        <div class="row">                            <div class="col-sm-6">                                <div class="col-sm-5">                                    <label for="available">Disponibilidad de la Máquina</label>                                        <select name="available" id="available" style="color: black" class="form-control">                                            <option selected value="Disponible"> Disponible </option>                                            <option value="No Disponible">No Disponible </option>                                        </select>                                </div>                                <div class="col-sm-3">                                    <label for="scoops">Cucharones</label>                                    <input type="text" id="scoops" name="scoops" class="form-control"                                           value="<?php echo $scoops ?>">                                </div>                                <div class="col-sm-3">                                    <label for="scoops">Peso Material</label>                                    <input type="text" id="material_weight" name="material_weight" class="form-control"                                           value="<?php echo $material_weight ?>">                                </div>                            </div>                        </div>                        <div class="row">                            <div class="col-sm-6">                                <div class="col-sm-12">                                    <label for="oil">Comentarios</label></div>                                <div class="col-sm-12">                                    <input type="text" class="form-control" style="height: 75px" name="comments"                                           value="<?php echo $comments ?>">                                </div>                            </div>                            <div class="col-sm-3">                                <input type="submit" class="btn red-submit" name="guardar"                                       value="<?php echo $button ?>" style="width: 100%; margin-top: 15%">                            </div>                        </div>                    </div>                    <div class="col-sm-3">                        <a class="btn red-submit" id="add_products" style="margin-top: 10%">Agregar Productos</a>                        <br>                    </div>                    <div id="add_proudct_form" style="display: none" class="row">                        <div class="col-sm-12">                            <div class="col-sm-3">                                <label>Productos:</label>                                <select class="form-control" id="products">                                    <option value="444">Diesel</option>                                    <option value="445">Gasolina</option>                                    <option value="74">Aceite Diesel</option>                                    <option value="446">Aceite Gasolina</option>                                    <option value="78">Neumoaceite</option>                                    <option value="76">Aceite hidraulico</option>                                    <option value="447">Aceite de transmision</option>                                    <option value="77">Aceite de diferenciales</option>                                </select>                            </div>                            <div class="col-sm-3">                                <label for="IDMina">Localización:</label>                                <select name="IDMina" id="IDMina" class="form-control">                                    <?php foreach ($minasGuardadas as $mina) : ?>                                        <option value="<?php echo $mina->mine_id ?>"><?php echo $mina->name ?></option>                                    <?php endforeach; ?>                                </select>                            </div>                            <div class="col-sm-3">                                <label>Cantidad:</label>                                <input type="text" class="form-control" id="quantity">                            </div>                            <div class="col-sm-2">                                <label for="fecha1">Fecha</label>                                <input  type="date" class="form-control" name="date1" id="datepick"                                       >                            </div>                            <div class="col-sm-3">                                <a id="submit-form-ajax" class="btn red-submit" style="width: 50%; margin-top: 5%;">Agregar</a>                            </div>                        </div>                    </div>                    <?php                    $actualizar = $this->session->flashdata('actualizado');                    if ($actualizar) {                        ?><span id="actualizadoCorrectamente"><?= $actualizar ?></span>                        <?php                    }                    ?>                    <?php echo form_close(); ?>                    <div class="divider"></div>                    <div class="clearfix"></div>                    <br>                    <br>                        <!-------------------------                      ---------Botones-----------                        ----------------------------->                    <div class="col-sm-2" >                        <a id="btn-all" class="btn red-submit" style="width: 100%">Todos</a>                    </div>                    <div class="col-sm-2">                        <a  id="btn-date" class="btn btn-default" style="width: 100%">Fecha</a>                    </div>                    <!-------------------------                    ---------  tabla date  -----------                      ----------------------------->                    <div class="col-lg-12 table-responsive"> <?php if (count($controlesGuardados) > 1 || !empty($controlesGuardados)) { ?><?php if (isset($links)): ?>                            <div class="pull-right">                                <?php echo $links; ?></div> <?php endif; ?>                        <div id="order_date" style="display: none">                            <table class="table table-striped table-condensed">                                <thead>                                <th>Fecha</th>                                <th>Turno</th>                                <th>Diesel</th>                                <th>Toneladas</th>                                <th>Cucharones</th>                                <th>Horómetro</th>                                <th>Disponibilidad</th>                                <th>Ver Equipos</th>                                <th>Ver Registros</th>                                </thead>                                <tbody></tbody>                                <?php                                foreach ($dates1 as $day) :                                    $gas_loades = 0;                                    $scoops = 0;                                    $oil_m = 0;                                    $oil_h = 0;                                    $oil_n = 0;                                    $oil_d = 0;                                    $oil_t = 0;                                    $capacidad_c = 0;                                    foreach ($controlesGuardados as $controles) :                                        if ($controles->date == $day->date && $controles->shift == $day->shift) {                                            $gas_loades += $controles->gas_loaded;                                            $scoops += $controles->scoops;                                            $oil_m += $controles->oil_m;                                            $oil_h += $controles->oil_h;                                            $oil_t += $controles->oil_t;                                            $oil_d += $controles->oil_d;                                            $capacidad_c += $controles->capacidad_c;                                        }                                    endforeach; ?>                                    <tr>                                        <td><?php echo $day->date ?></td>                                        <td><?php echo $day->shift ?></td>                                        <td><?php echo $gas_loades ?></td>                                        <td><?php echo $scoops * $capacidad_c * $material_weight?></td>                                        <td><?php echo $scoops ?></td>                                        <td><?php echo $controles->horometro;?></td>                                        <td><?php echo $controles->available;?></td>                                        <td><a href="#Maq<?php echo $day->date . $day->shift ?>" data-toggle="modal"> <i                                                        class="fa fa-calendar-o"></i> </a></td>                                        <td><a href="#Reg<?php echo $day->date . $day->shift ?>" data-toggle="modal"> <i                                                        class="fa fa-calendar-o"></i> </a></td>                                    </tr>                                <?php endforeach; ?>                            </table>                    </div>                        <!-------------------------                         ---------  tabla todos  -----------                        ----------------------------->                            <div id="order_all">                                <table class="table table-striped table-condensed">                                    <thead>                                    <th>Fecha</th>                                    <th>Turno</th>                                    <th>Operador</th>                                    <th>Maquina</th>                                    <th>Diesel</th>                                    <th>Toneladas</th>                                    <th>Cucharones</th>                                    <th>Horómetro</th>                                    <th>Disponibilidad</th>                                    <th>Ver Equipos</th>                                    <th>Ver Registros</th>                                    </thead>                                    <tbody></tbody>                                    <?php                                    foreach ($controlesGuardados as $controles) :                                       ?>                                        <tr>                                            <td><?php echo $controles->date ?></td>                                            <td><?php echo $controles->shift ?></td>                                            <?php                                            $bool = true;                                            if (is_array($operadoresGuardados) || is_object($operadoresGuardados)) {                                                foreach ($operadoresGuardados as $operadores) {                                                    if ($controles->operator == $operadores->operator_id) {                                                        $bool = false;  ?>                                                        <td><?php echo $operadores->name; ?></td>                                                    <?php   }                                                }                                                if ($bool == true){ ?>                                                    <td>null</td> <?php                                                }                                            }                                            ?>                                            <?php                                            $bool1 = true;                                            if (is_array($maquinasGuardadas) || is_object($maquinasGuardadas)) {                                                foreach ($maquinasGuardadas as $maquina) {                                                    if ($controles->machine_id == $maquina->machine_id) {                                                        $bool1 = false;  ?>                                                        <td><?php  echo $maquina->description; ?></td>                                                    <?php   }                                                }                                                if ($bool1 == true){ ?>                                                    <td>null</td> <?php                                                }                                            }                                            ?>                                            <td><?php echo $controles->gas_loaded; ?></td>                                            <td><?php echo $controles->capacidad_c * $controles->scoops ; ?></td>                                            <td><?php echo $controles->scoops;?></td>                                            <td><?php echo $controles->horometro;?></td>                                            <td><?php echo $controles->available;?></td>                                            <td><a href="#Maq1<?php echo $controles->control_id ?>" data-toggle="modal"> <i                                                            class="fa fa-calendar-o"></i> </a></td>                                            <td><a href="#Reg1<?php echo $controles->control_id ?>" data-toggle="modal"> <i                                                            class="fa fa-calendar-o"></i> </a></td>                                        </tr>                                    <?php endforeach; ?>                                </table><?php } else { ?> <h2>No hay Mantenimiento                                    registrado</h2> <?php } ?>                            </div>                </div>               </div>                <p></p> <?php $actualizar = $this->session->flashdata('actualizado');                if ($actualizar) { ?> <span                        id="actualizadoCorrectamente"><?= $actualizar ?></span> <?php } ?> <?php echo form_close(); ?>                <div class="divider"></div>            </div>        </div>    </div></div></div></div></div><!-------------------------                     ---------  modular Equipos  -----------                    -----------------------------><?php if (count($dates1) > 1 || !empty($dates1)) { ?>    <?php    foreach ($dates1 as $day) {        ?>        <div class="modal fade" id="Maq<?php echo $day->date . $day->shift ?>">            <div class="modal-dialog" role="document">                <div class="modal-content">                    <div class="modal-header">                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span                                    aria-hidden="true">&times;</span></button>                        <h4 class="modal-title" id="myModalLabel"> Registros del dia <?php echo $day->date ?> </h4>                    </div>                    <div class="modal-body">                        <div class="col-lg-12 table-responsive"> <?php if (count($controlesGuardados) > 1 || !empty($controlesGuardados)) { ?>                                <table class="table table-striped table-condensed">                                    <thead>                                    <th>Clave de Equipo</th>                                    <th>Descripcion</th>                                    </thead>                                    <tbody></tbody> <?php $machines = [];                                    foreach ($controlesGuardados as $control) :                                        if ($control->date == $day->date && $day->shift == $control->shift) {                                            if (!in_array($control->machine_id, $machines)) {                                                array_push($machines, $control->machine_id);                                            }                                        } endforeach;                                    foreach ($maquinasGuardadas as $maquina) {                                        if (in_array($maquina->machine_id, $machines)) { ?>                                            <tr>                                                <td><?php echo $maquina->short_number; ?></td>                                                <td><?php echo $maquina->description; ?></td>                                            </tr> <?php }                                    } ?> </table> <?php } else { ?>                                <h2>No hay equipos registrados</h2> <?php } ?>                        </div>                    </div>                    <div class="modal-footer">                        <button type="button" class="btn btn-default" data-dismiss="modal"> Cerrar</button>                    </div>                </div>            </div>        </div>    <?php }}?>    <!-------------------------                     ---------  modular Equipos  Todos -----------                    -----------------------------><?php foreach ($controlesGuardados as $controles_equipos) {    ?>    <div class="modal fade" id="Maq1<?php echo $controles_equipos->control_id  ?>">            <div class="modal-dialog" role="document">                <div class="modal-content">                    <div class="modal-header">                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span                                    aria-hidden="true">&times;</span></button>                        <h4 class="modal-title" id="myModalLabel"> Registros del dia <?php echo $day->date ?> </h4>                    </div>                    <div class="modal-body">                        <div class="col-lg-12 table-responsive"> <?php if (count($controlesGuardados) > 1 || !empty($controlesGuardados)) { ?>                                <table class="table table-striped table-condensed">                                    <thead>                                    <th>Clave de Equipo</th>                                    <th>Descripcion</th>                                    </thead>                                    <tbody></tbody> <?php $machines = [];                                    foreach ($controlesGuardados as $control) :                                        if ($control->control_id == $controles_equipos->control_id) {                                            if (!in_array($control->machine_id, $machines)) {                                                array_push($machines, $control->machine_id);                                            }                                        } endforeach;                                    foreach ($maquinasGuardadas as $maquina) {                                        if (in_array($maquina->machine_id, $machines)) { ?>                                            <tr>                                                <td><?php echo $maquina->short_number; ?></td>                                                <td><?php echo $maquina->description; ?></td>                                            </tr> <?php }                                    } ?> </table> <?php } else { ?>                                <h2>No hay equipos registrados</h2> <?php } ?>                        </div>                    </div>                    <div class="modal-footer">                        <button type="button" class="btn btn-default" data-dismiss="modal"> Cerrar</button>                    </div>                </div>            </div>        </div><?php }   ?>        <!-------------------------                             ---------  Modular Registro  -----------                            -----------------------------><?php if (count($dates1) > 1 || !empty($dates1)) { ?><?phpforeach ($dates1 as $day) {?>        <div class="modal fade" id="Reg<?php echo $day->date . $day->shift ?>">            <div class="modal-dialog" role="document">                <div class="modal-content">                    <div class="modal-header">                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span                                    aria-hidden="true">&times;</span></button>                        <h4 class="modal-title" id="myModalLabel"> Registros del dia <?php echo $day->date ?> </h4>                    </div>                    <div class="modal-body">                        <div class="col-lg-12 table-responsive"> <?php if (count($controlesGuardados) > 1 || !empty($controlesGuardados)) { ?>                                <table class="table table-striped table-condensed">                                    <thead>                                    <th>Control</th>                                    <th>Operador</th>                                    <th>Turno</th>                                    <th>Maquina</th>                                    <th>Tiempo Trabajado</th>                                    <th>Horometro inicial</th>                                    <th>Horometro final</th>                                    <th>Combustible Cargado</th>                                    <th>Rendimiento (Dc / Ht)</th>                                    <th>Cucharones</th>                                    <th>Toneladas</th>                                    <th>Diesel/toneladas</th>                                    <th>Eficiencia (Ht / 12)</th>                                    <th>Aceite de Motor</th>                                    <th>Aceite Hidraulico</th>                                    <th>Aceite Diferenciales</th>                                    <th>Aceite de transmision</th>                                    <th>Comentarios</th>                                    <th>Editar</th>                                    <th>Eliminar</th>                                    </thead>                                    <?php                                    foreach ($controlesGuardados as $controlreg1)   :                                        if ($controlreg1->date == $day->date && $controlreg1->shift == $day->shift) { ?>                                            <tr>                                                <td><?php echo $controlreg1->control_id; ?></td>                                                <?php                                                $bool5 = true;                                                if (is_array($operadoresGuardados) || is_object($operadoresGuardados)) {                                                    foreach ($operadoresGuardados as $operadores) {                                                        if ($controlreg1->operator == $operadores->operator_id) {                                                            $bool5 = false;  ?>                                                            <td><?php echo $operadores->name; ?></td>                                                        <?php   }                                                    }                                                    if ($bool5 == true){ ?>                                                        <td>null</td> <?php                                                    }                                                }                                                ?>                                                <td><?php echo $controlreg1->shift; ?></td>                                                <td><?php foreach ($maquinasGuardadas as $maquina): if ($controlreg1->machine_id == $maquina->machine_id) {                                                        echo $maquina->short_number;                                                    } endforeach; ?></td>                                                <td><?php echo $controlreg1->hour_meter_final - $controlreg1->hour_meter_initial; ?></td>                                                <td><?php echo $controlreg1->hour_meter_initial; ?></td>                                                <td><?php echo $controlreg1->hour_meter_final; ?></td>                                                <td><?php echo $controlreg1->gas_loaded; ?></td>                                                <td><?php if (($controlreg1->hour_meter_final - $controlreg1->hour_meter_initial) == 0) {                                                        echo '0';                                                    } else {                                                        echo $controlreg1->gas_loaded / ($controlreg1->hour_meter_final - $controlreg1->hour_meter_initial);                                                    } ?></td>                                                <td><?php echo $controlreg1->scoops; ?></td>                                                <td><?php echo $controlreg1->scoops * $controlreg1->mineral_weight * $controlreg1->capacidad_c ; ?></td>                                                <td><?php if ($controlreg1->gas_loaded != 0 and $controlreg1->gas_loaded != '' and $controlreg1->scoops != 0) echo round(($controlreg1->gas_loaded / ($controlreg1->scoops * 8)), 4); else echo '---'; ?></td>                                                <td><?php echo $controlreg1->hour_meter_final - $controlreg1->hour_meter_initial ?></td>                                                <td><?php echo $controlreg1->oil_m ?></td>                                                <td><?php echo $controlreg1->oil_h ?></td>                                                <td><?php echo $controlreg1->oil_d ?></td>                                                <td><?php echo $controlreg1->oil_t ?></td>                                                <td class="a" href="#" data-toggle="tooltip" data-placement="top"                                                    title="<?php echo $controlreg1->comments ?>"> <?php echo $controlreg1->comments ?>                                                </td>                                                <td class="text-center"><a                                                            href="<?php echo base_url(); ?>controles/index/<?php echo $controlreg1->control_id; ?>"><i                                                                class="fa fa-pencil-square-o"></i></a></td>                                                <td class="text-center"><a                                                            href="<?php echo base_url(); ?>controles/eliminar/<?php echo $controlreg1->control_id; ?>"><i                                                                class="fa fa-times"></i></a></td>                                            </tr> <?php } endforeach; ?> </table> <?php } else { ?> <h2>No hay altas                                registradas</h2> <?php } ?> </div>                    </div>                    <div class="modal-footer">                        <button type="button" class="btn btn-default" data-dismiss="modal"> Cerrar</button>                    </div>                </div>            </div>        </div><?php }}?><!-------------------------                           ---------  Modular Registro  Todos -----------                          -----------------------------><?php foreach ($controlesGuardados as $controles_equipos) {?><div class="modal fade" id="Reg1<?php echo $controles_equipos->control_id  ?>"    <div class="modal-dialog" role="document">        <div class="modal-content">            <div class="modal-header">                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span                            aria-hidden="true">&times;</span></button>                <h4 class="modal-title" id="myModalLabel"> Registros del dia <?php echo $day->date ?> </h4>            </div>            <div class="modal-body">                <div class="col-lg-12 table-responsive"> <?php if (count($controlesGuardados) > 1 || !empty($controlesGuardados)) { ?>                        <table class="table table-striped table-condensed">                            <thead>                            <th>Control</th>                            <th>Operador</th>                            <th>Turno</th>                            <th>Maquina</th>                            <th>Tiempo Trabajado</th>                            <th>Horometro inicial</th>                            <th>Horometro final</th>                            <th>Combustible Cargado</th>                            <th>Rendimiento (Dc / Ht)</th>                            <th>Cucharones</th>                            <th>Toneladas</th>                            <th>Diesel/toneladas</th>                            <th>Eficiencia (Ht / 12)</th>                            <th>Aceite de Motor</th>                            <th>Aceite Hidraulico</th>                            <th>Aceite Diferenciales</th>                            <th>Aceite de transmision</th>                            <th>Comentarios</th>                            <th>Editar</th>                            <th>Eliminar</th>                            </thead>                            <?php                            foreach ($controlesGuardados as $controlreg1)   :                                if ($controlreg1->control_id == $controles_equipos->control_id) { ?>                                    <tr>                                        <td><?php echo $controlreg1->control_id; ?></td>                                        <?php                                        $bool5 = true;                                        if (is_array($operadoresGuardados) || is_object($operadoresGuardados)) {                                            foreach ($operadoresGuardados as $operadores) {                                                if ($controlreg1->operator == $operadores->operator_id) {                                                    $bool5 = false;  ?>                                                    <td><?php echo $operadores->name; ?></td>                                                <?php   }                                            }                                            if ($bool5 == true){ ?>                                                <td>null</td> <?php                                            }                                        }                                        ?>                                        <td><?php echo $controlreg1->shift; ?></td>                                        <td><?php foreach ($maquinasGuardadas as $maquina): if ($controlreg1->machine_id == $maquina->machine_id) {                                                echo $maquina->short_number;                                            } endforeach; ?></td>                                        <td><?php echo $controlreg1->hour_meter_final - $controlreg1->hour_meter_initial; ?></td>                                        <td><?php echo $controlreg1->hour_meter_initial; ?></td>                                        <td><?php echo $controlreg1->hour_meter_final; ?></td>                                        <td><?php echo $controlreg1->gas_loaded; ?></td>                                        <td><?php if (($controlreg1->hour_meter_final - $controlreg1->hour_meter_initial) == 0) {                                                echo '0';                                            } else {                                                echo $controlreg1->gas_loaded / ($controlreg1->hour_meter_final - $controlreg1->hour_meter_initial);                                            } ?></td>                                        <td><?php echo $controlreg1->scoops; ?></td>                                        <td><?php echo $controlreg1->scoops * $controlreg1->mineral_weight * $controlreg1->capacidad_c ; ?></td>                                        <td><?php if ($controlreg1->gas_loaded != 0 and $controlreg1->gas_loaded != '' and $controlreg1->scoops != 0) echo round(($controlreg1->gas_loaded / ($controlreg1->scoops * 8)), 4); else echo '---'; ?></td>                                        <td><?php echo $controlreg1->hour_meter_final - $controlreg1->hour_meter_initial ?></td>                                        <td><?php echo $controlreg1->oil_m ?></td>                                        <td><?php echo $controlreg1->oil_h ?></td>                                        <td><?php echo $controlreg1->oil_d ?></td>                                        <td><?php echo $controlreg1->oil_t ?></td>                                        <td class="a" href="#" data-toggle="tooltip" data-placement="top"                                            title="<?php echo $controlreg1->comments ?>">Ver Comentarios                                        </td>                                        <td class="text-center"><a                                                    href="<?php echo base_url(); ?>controles/index/<?php echo $controlreg1->control_id; ?>"><i                                                        class="fa fa-pencil-square-o"></i></a></td>                                        <td class="text-center"><a                                                    href="<?php echo base_url(); ?>controles/eliminar/<?php echo $controlreg1->control_id; ?>"><i                                                        class="fa fa-times"></i></a></td>                                    </tr> <?php } endforeach; ?> </table> <?php } else { ?> <h2>No hay altas                        registradas</h2> <?php } ?> </div>            </div>            <div class="modal-footer">                <button type="button" class="btn btn-default" data-dismiss="modal"> Cerrar</button>            </div>        </div>    </div></div><?php }   ?><script>    $(document).ready(function(){        $("#btn-all").click(function(){            $("#order_date").hide();            $("#btn-date").addClass("btn-default");            $("#btn-date").removeClass("red-submit");            $("#order_all").show();            $("#btn-all").addClass("red-submit");            $("#btn-all").removeClass("btn-default");        });        $("#btn-date").click(function(){            $("#order_all").hide();            $("#btn-all").addClass("btn-default");            $("#btn-all").removeClass("red-submit");            $("#order_date").show();            $("#btn-date").addClass("red-submit");            $("#btn-date").removeClass("btn-default");        });    });</script><script type="text/javascript" charset="utf-8">    $('.datepick').each(function () {        $(this).datepicker({dateFormat: 'yy-mm-dd'});    });</script><script>    var count = 0;    $("#add_products").click(function () {        if (count % 2 == 0) {            document.getElementById("add_products").innerHTML = "Ocultar Productos";            $("#add_proudct_form").show();        } else {            document.getElementById("add_products").innerHTML = "Agregar Productos";            $("#add_proudct_form").hide();        }        count++;    });</script><script>    $("#submit-form-ajax").click(function () {        var products = document.getElementById("products").value;        var location = document.getElementById("IDMina").value;        var quantity = document.getElementById("quantity").value;        var date1 = document.getElementById("date1").value;        $.ajax({            type: 'post',            dataType: 'json',            url: '/controles/quick_products',            data: {                'products_id': products,                'location_id': location,                'quantity': quantity                'date': date1            },            success: function (data) {            },            error: function (data) {                document.getElementById("span-alert-form").innerHTML = " <strong>El Producto ha sido Agregado!!</strong>";                $("#alert-form").show();                $("#add_proudct_form").hide();                var products = document.getElementById("products").value = "";                var location = document.getElementById("IDMina").value = "";                var quantity = document.getElementById("quantity").value = "";                document.getElementById("add_products").innerHTML = "Agregar Productos";                console.log(data);            }        });    });</script><script>    function onchange_function() {        var machine = document.getElementById("IDMaquina").value;        $.ajax({            type: 'post',            dataType: 'json',            url: '/controles/getMaquinas',            data: {                'machine_id': machine,            },            success: function (maquinas) {                console.log("ei");                console.log(maquinas);                document.getElementById("hourIn").value = maquinas['actual_work'];                document.getElementById("material_weight").value = maquinas['mineral_weight'];                if (maquinas['machine_type'] == "ligero" || maquinas['machine_type'] == "portatiles") {                    document.getElementById("label-hourIn").innerHTML = "kilometraje Inicial";                    document.getElementById("label-hourOut").innerHTML = "kilometraje Final";                }                else {                    if (maquinas['machine_type'] != "") {                        document.getElementById("label-hourIn").innerHTML = "Horometro Inicial";                        document.getElementById("label-hourOut").innerHTML = "Horometro Final";                    }                }            },            error: function () {            }        });    }</script><script type="text/javascript">    $("#IDMaquina").select2({        language: 'es',        allowClear: true,        placeholder: "Seleccionar",        ajax: {            url: "<?php echo base_url(); ?>requesition/getMaquinas",            method: 'post',            dataType: 'json',            delay: 250,            data: function (params) {                return {                    string: params.term, // search term                    page: params.page                };            },            processResults: function (data, params) {                // parse the results into the format expected by Select2                // since we are using custom formatting functions we do not need to                // alter the remote JSON data, except to indicate that infinite                // scrolling can be used                params.page = params.page || 1;                return {                    results: data.items,                    pagination: {                        more: (params.page * 30) < data.total_count                    }                };            },            cache: true        },        /*escapeMarkup: function (markup) { return markup; }, // let our custom formatter work*/        minimumInputLength: 1    });    function setTab(value) {        $.ajax({            type: "POST",            url: "controles/setTab",            data: {value: value}        });    }    $("#eqFilt").select2({        language: 'es',        width: 'resolve',        allowClear: true,        placeholder: "Seleccionar",        ajax: {            url: "<?php echo base_url(); ?>requesition/getMaquinas",            method: 'post',            dataType: 'json',            delay: 250,            data: function (params) {                return {                    string: params.term, // search term                    page: params.page                };            },            processResults: function (data, params) {                // parse the results into the format expected by Select2                // since we are using custom formatting functions we do not need to                // alter the remote JSON data, except to indicate that infinite                // scrolling can be used                params.page = params.page || 1;                return {                    results: data.items,                    pagination: {                        more: (params.page * 30) < data.total_count                    }                };            },            cache: true        },        /*escapeMarkup: function (markup) { return markup; }, // let our custom formatter work*/        minimumInputLength: 1    });    $("#eqFilt").change(function () {        var content = '';        var value = $(this).val();        $.ajax({            type: "POST",            dataType: 'json',            url: "controles/ajaxEquipo",            data: {machine_id: value},            success: function (data) {                $.each(data.items, function (i, v) {                    content += '<tr>' +                        '<td>' +                        v['id'] +                        '</td>' +                        '<td>' +                        v['date'] +                        '</td>' +                        '<td>' +                        v['shift'] +                        '</td>' +                        '<td>' +                        v['hi'] +                        '</td>' +                        '<td>' +                        v['hf'] +                        '</td>' +                        '<td>' +                        v['ht'] +                        '</td>' +                        '<td>' +                        v['operator'] +                        '</td>' +                        '</tr>';                });                $('#catchEquipos').html(content);            },            complete: function (data) {                $('#equiposFilt').modal('show');                $('#eqFilt').val('');                // $('#eqFilt').val('').change()  ;            }        });    })</script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script><script>    $(document).ready(function () {        $('[data-toggle="tooltip"]').tooltip();    });</script><script> $("#IDOperador").select2({        language: 'es', allowClear: true, placeholder: "Seleccionar", ajax: {            url: "<?php echo base_url(); ?>controles/getOperadores_operadores",            method: 'post',            dataType: 'json',            delay: 250,            data: function (params) {                return {string: params.term, /* search term*/ page: params.page};            },            processResults: function (data, params) { /* parse the results into the format expected by Select2*/                params.page = params.page || 1;                return {                    results: data.items, pagination: {more: (params.page * 30) < data.total_count}                };            },            cache: true        },        /*escapeMarkup: function (markup) { return markup; }, // let our custom formatter work*/        minimumInputLength: 1    });</script>